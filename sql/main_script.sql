
-- CREATE TABLE STATEMENTS FOR LEGO DB PROJECT
-- Tables: PAISES, INSIDE_TOURS, CLIENTES_LEGO, FANS_MENOR_LEGO, INSCRIPCIONES_TOUR, INSCRITOS, ENTRADAS
-- Constraints Added with ALTER TABLE statements (not inline) EXCEPT FOR PKs AND NNs

-- 1) PAIS
CREATE TABLE PAISES (
    ID_PAIS NUMBER(4) PRIMARY KEY,
    NOMBRE VARCHAR2(28) NOT NULL,
    NACIONALIDAD VARCHAR2(36) NOT NULL,
    CONTINENTE VARCHAR2(7) NOT NULL,
    UNION_EUROPEA NUMBER(1) NOT NULL -- 1 = true, 0 = false (Oracle SQL has no BOOLEAN type)
);

-- 2) INSIDE_TOURS
CREATE TABLE INSIDE_TOURS (
    F_INICIO DATE PRIMARY KEY,
    PRECIO_PERSONA NUMBER(7,2) NOT NULL,
    TOTAL_CUPOS NUMBER(4) NOT NULL
);

-- 3) CLIENTES_LEGO
CREATE TABLE CLIENTES_LEGO (
    ID_CLIENTE NUMBER(4) PRIMARY KEY,
    P_NOMBRE VARCHAR2(28) NOT NULL,
    P_APELLIDO VARCHAR2(28) NOT NULL,
    S_APELLIDO VARCHAR2(28) NOT NULL,
    FECHA_NAC DATE NOT NULL,
    NUM_DOC VARCHAR2(50) NOT NULL,
    TELEFONO VARCHAR2(20) NOT NULL,
    NACIMIENTO NUMBER(4) NOT NULL, -- FK to PAISES(ID_PAIS)
    RESIDENCIA NUMBER(4) NOT NULL, -- FK to PAISES(ID_PAIS)
    S_NOMBRE VARCHAR2(28),
    NUM_PASS VARCHAR2(50),
    F_VEN_PASS DATE,
    EMAIL VARCHAR2(254)
);

-- 4) FANS_MENOR_LEGO
CREATE TABLE FANS_MENOR_LEGO (
    ID_FAN NUMBER(4) PRIMARY KEY,
    P_NOMBRE VARCHAR2(28) NOT NULL,
    P_APELLIDO VARCHAR2(28) NOT NULL,
    S_APELLIDO VARCHAR2(28) NOT NULL,
    NACIMIENTO NUMBER(4) NOT NULL, -- fk to PAISES
    FECHA_NAC DATE NOT NULL,
    NUM_DOC VARCHAR2(50) NOT NULL,
    S_NOMBRE VARCHAR2(28),
    ID_REPRESENTANTE NUMBER(4), -- FK to CLIENTES_LEGO
    NUM_PASS VARCHAR2(50),
    F_VEN_PASS DATE
);

-- 5) INSCRIPCIONES_TOUR
CREATE TABLE INSCRIPCIONES_TOUR (
    F_INICIO DATE NOT NULL, -- FK to INSIDE_TOURS
    NUM_INSCRIPCION NUMBER(4),
    TOTAL NUMBER(9,2) NOT NULL,
    F_INSCRIPCION DATE NOT NULL,
    STATUS_CONF VARCHAR2(10) NOT NULL
);

-- 6) INSCRITOS
CREATE TABLE INSCRITOS (
    F_INICIO DATE NOT NULL, -- fk to INSCRIPCIONES_TOUR(F_INICIO)
    NUM_INSCRIPCION NUMBER(4) NOT NULL, -- fk to INSCRIPCIONES_TOUR(NUM_INSCRIPCION)
    ID_INSCRITOS NUMBER(4),
    PARTICIPANTE_MENOR NUMBER(4), -- fk to FANS_MENOR_LEGO(ID_FAN)
    PARTICIPANTE_MAYOR NUMBER(4)  -- fk to CLIENTES_LEGO(ID_CLIENTE)
);

-- 7) ENTRADAS
CREATE TABLE ENTRADAS (
    F_INICIO DATE NOT NULL, -- fk to INSCRIPCIONES_TOUR(F_INICIO)
    NUM_INSCRIPCION NUMBER(4) NOT NULL, -- fk to INSCRIPCIONES_TOUR(NUM_INSCRIPCION)
    NUM_ENTRADA NUMBER(4),
    TIPO VARCHAR2(7) NOT NULL
);

-- ======================================
-- Add constraints (PKs, FKs, Checks, Uniques) via ALTER TABLE
-- ======================================

ALTER TABLE PAISES ADD CONSTRAINT CHK_PAIS_CONTINENTE CHECK (CONTINENTE IN ('AMERICA','AFRICA','ASIA','EUROPA','OCEANIA'));
ALTER TABLE PAISES ADD CONSTRAINT CHK_PAIS_UNION_EUROPEA CHECK (UNION_EUROPEA IN (0,1)); -- 1 = true, 0 = false

ALTER TABLE INSIDE_TOURS ADD CONSTRAINT CHK_INSIDE_TOUR_CUPOS CHECK (TOTAL_CUPOS > 0);
ALTER TABLE INSIDE_TOURS ADD CONSTRAINT CHK_INSIDE_TOUR_PRECIO CHECK (PRECIO_PERSONA > 0);

ALTER TABLE CLIENTES_LEGO ADD CONSTRAINT UNQ_CLIENTE_DOC_NAC UNIQUE (NUM_DOC); -- (NUM_DOC, NACIMIENTO)
ALTER TABLE CLIENTES_LEGO ADD CONSTRAINT UNQ_CLIENTE_NUM_PASS UNIQUE (NUM_PASS);
-- Age must be >= 21 years: fecha_nac <= add_months(sysdate, -12*21)
-- Age validation for CLIENTES_LEGO is implemented via a trigger because CHECK constraints
-- in Oracle cannot reference SYSDATE. See triggers below.
-- Email basic regex check, using REGEXP_LIKE; 
ALTER TABLE CLIENTES_LEGO ADD CONSTRAINT CHK_CLIENTE_EMAIL CHECK (EMAIL IS NULL OR REGEXP_LIKE(EMAIL, '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,63}$'));
ALTER TABLE CLIENTES_LEGO ADD CONSTRAINT CHK_CLIENTE_TELEFONO CHECK (TELEFONO IS NULL OR REGEXP_LIKE(TELEFONO, '^(\+?\d{1,3})?[\s.-]?(\(?\d{1,4}\)?)?[\s.-]?(\d[\s.-]?){4,14}\d$'));

-- FKs client nacimiento and residencia to PAISES
ALTER TABLE CLIENTES_LEGO ADD CONSTRAINT FK_CLIENTE_NACIMIENTO_PAIS FOREIGN KEY (NACIMIENTO) REFERENCES PAISES (ID_PAIS);
ALTER TABLE CLIENTES_LEGO ADD CONSTRAINT FK_CLIENTE_RESIDENCIA_PAIS FOREIGN KEY (RESIDENCIA) REFERENCES PAISES (ID_PAIS);

ALTER TABLE FANS_MENOR_LEGO ADD CONSTRAINT UNQ_FAN_DOC_NAC UNIQUE (NUM_DOC); -- (NUM_DOC, NACIMIENTO)
ALTER TABLE FANS_MENOR_LEGO ADD CONSTRAINT UNQ_FAN_NUM_PASS UNIQUE (NUM_PASS);
ALTER TABLE FANS_MENOR_LEGO ADD CONSTRAINT FK_FAN_NACIMIENTO_PAIS FOREIGN KEY (NACIMIENTO) REFERENCES PAISES (ID_PAIS);
ALTER TABLE FANS_MENOR_LEGO ADD CONSTRAINT FK_FAN_REPRESENTANTE FOREIGN KEY (ID_REPRESENTANTE) REFERENCES CLIENTES_LEGO (ID_CLIENTE);
-- A fan must be less than 21 years old: fecha_nac > add_months(sysdate, -12*21)
-- Age validations for FANS_MENOR_LEGO (and representative requirement) are implemented via
-- a trigger because CHECK constraints in Oracle cannot reference SYSDATE. See triggers below.

ALTER TABLE INSCRIPCIONES_TOUR ADD CONSTRAINT FK_INSCRIPCION_F_INICIO FOREIGN KEY (F_INICIO) REFERENCES INSIDE_TOURS (F_INICIO);
ALTER TABLE INSCRIPCIONES_TOUR ADD CONSTRAINT PK_INSCRIPCION PRIMARY KEY (NUM_INSCRIPCION, F_INICIO);
ALTER TABLE INSCRIPCIONES_TOUR ADD CONSTRAINT CHK_INSCRIPCION_STATUS CHECK (STATUS_CONF IN ('PENDIENTE', 'PAGO'));
ALTER TABLE INSCRIPCIONES_TOUR ADD CONSTRAINT CHK_INSCRIPCION_TOTAL CHECK (TOTAL >= 0);

-- Since INSCRIPCIONES_TOUR has a composite primary key (NUM_INSCRIPCION, F_INICIO), the
-- foreign key in INSCRITOS must reference both columns together.
ALTER TABLE INSCRITOS ADD CONSTRAINT FK_INSCRITOS_INSCRIPCION_FULL FOREIGN KEY (NUM_INSCRIPCION, F_INICIO) REFERENCES INSCRIPCIONES_TOUR (NUM_INSCRIPCION, F_INICIO);
ALTER TABLE INSCRITOS ADD CONSTRAINT PK_INSCRITOS PRIMARY KEY (F_INICIO, NUM_INSCRIPCION, ID_INSCRITOS);
ALTER TABLE INSCRITOS ADD CONSTRAINT FK_INSCRITOS_PART_MAYOR FOREIGN KEY (PARTICIPANTE_MAYOR) REFERENCES CLIENTES_LEGO (ID_CLIENTE);
ALTER TABLE INSCRITOS ADD CONSTRAINT FK_INSCRITOS_PART_MENOR FOREIGN KEY (PARTICIPANTE_MENOR) REFERENCES FANS_MENOR_LEGO (ID_FAN);
-- Participant must be either a menor OR a mayor (exclusive)
ALTER TABLE INSCRITOS ADD CONSTRAINT CHK_INSCRITOS_PARTICIPANT_XOR CHECK (
    (PARTICIPANTE_MENOR IS NOT NULL AND PARTICIPANTE_MAYOR IS NULL) OR
    (PARTICIPANTE_MENOR IS NULL AND PARTICIPANTE_MAYOR IS NOT NULL)
);

-- Use a composite foreign key on ENTRADAS that references the composite primary key on INSCRIPCIONES_TOUR
ALTER TABLE ENTRADAS ADD CONSTRAINT FK_ENTRADA_INSCRIPCION_FULL FOREIGN KEY (NUM_INSCRIPCION, F_INICIO) REFERENCES INSCRIPCIONES_TOUR (NUM_INSCRIPCION, F_INICIO);

ALTER TABLE ENTRADAS ADD CONSTRAINT CHK_ENTRADA_TIPO CHECK (TIPO IN ('MENOR','REGULAR'));

COMMIT;

-- CREATE OR REPLACE TRIGGERS 

-- CLIENTES_LEGO: must be at least 21 years old
CREATE OR REPLACE TRIGGER TRG_CLIENTE_AGE
BEFORE INSERT OR UPDATE ON CLIENTES_LEGO
FOR EACH ROW
DECLARE
BEGIN
    IF :NEW.FECHA_NAC > ADD_MONTHS(SYSDATE, -12*21) THEN
        RAISE_APPLICATION_ERROR(-20101, 'Client must be at least 21 years old');
        DBMS_OUTPUT.PUT_LINE('CLIENTE DEBE SER MAYOR A 21 AÑOS');
    END IF;
END;
/

-- FANS_MENOR_LEGO: must be less than 21 years old; if under 18, ID_REPRESENTANTE required
CREATE OR REPLACE TRIGGER TRG_FAN_AGE_AND_REP
BEFORE INSERT OR UPDATE ON FANS_MENOR_LEGO
FOR EACH ROW
DECLARE
    v_union_europea NUMBER(1);
BEGIN
    -- Fan must be younger than 21
    IF :NEW.FECHA_NAC <= ADD_MONTHS(SYSDATE, -12*21) THEN
        RAISE_APPLICATION_ERROR(-20102, 'Fan must be younger than 21 years old');
        DBMS_OUTPUT.PUT_LINE('FAN DEBE SER MENOR A 21 AÑOS');
    END IF;
    -- If fan is under 18 years old (FECHA_NAC > add_months(sysdate, -12*18)), a representative is required
    IF :NEW.FECHA_NAC > ADD_MONTHS(SYSDATE, -12*18) AND :NEW.ID_REPRESENTANTE IS NULL THEN
        RAISE_APPLICATION_ERROR(-20103, 'Fan under 18 must have a representative (ID_REPRESENTANTE)');
        DBMS_OUTPUT.PUT_LINE('FAN MENOR A 18 AÑOS REQUIERE REPRESENTANTE');
    END IF;
    -- Check: If nationality is NOT in the EU (PAISES.UNION_EUROPEA = 0) then passport and expiration must be provided
    BEGIN
        SELECT UNION_EUROPEA INTO v_union_europea FROM PAISES WHERE ID_PAIS = :NEW.NACIMIENTO;
    EXCEPTION
        WHEN NO_DATA_FOUND THEN
            v_union_europea := 1; -- default assume EU if not found, FK should prevent this from happening
    END;
    IF v_union_europea = 0 THEN
        IF :NEW.NUM_PASS IS NULL OR :NEW.F_VEN_PASS IS NULL THEN
            RAISE_APPLICATION_ERROR(-20104, 'Para nacionalidades fuera de la Union Europea, se requieren NUM_pass y F_VEN_PASS');
        END IF;
    END IF;
END;
/

-- TRIGGER: Prevent new INSIDE_TOURS from starting within 3 days of another tour
-- The constraint considers that each Inside Tour lasts 3 days starting at F_INICIO
-- So no two tours can have start dates within a 3-day overlapping window.
CREATE OR REPLACE TRIGGER TRG_INSIDE_TOURS_NO_OVERLAP
BEFORE INSERT OR UPDATE ON INSIDE_TOURS
FOR EACH ROW
DECLARE
    v_conflicts NUMBER;
BEGIN
    -- Check for any existing tour whose 3-day window overlaps with the new/updated tour start date
    SELECT COUNT(*) INTO v_conflicts
    FROM INSIDE_TOURS t
    WHERE (
        -- overlapping: t start within new tour window
        (t.F_INICIO BETWEEN :NEW.F_INICIO AND :NEW.F_INICIO + 2)
        OR
        -- or new start within existing tour window
        (:NEW.F_INICIO BETWEEN t.F_INICIO AND t.F_INICIO + 2)
    )
    -- exclude current row when updating (the row with the same F_INICIO as the old value)
    AND (:OLD.F_INICIO IS NULL OR t.F_INICIO != :OLD.F_INICIO);

    IF v_conflicts > 0 THEN
        RAISE_APPLICATION_ERROR(-20020, 'INSIDE_TOURS overlap: F_INICIO en conflicto con otro tour planificado');
    END IF;
END;
/

-- TRIGGER: Ensure legal representative is part of same INSCRIPCION_TOUR when inserting a minor
CREATE OR REPLACE TRIGGER TRG_INSCRITOS_MINOR_REP_CHECK
BEFORE INSERT ON INSCRITOS
FOR EACH ROW
DECLARE
    v_fan_fecha DATE;
    v_rep_id NUMBER(4);
    v_rep_exists NUMBER;
BEGIN
    -- If the participant is a minor, validate their representation
    IF :NEW.PARTICIPANTE_MENOR IS NOT NULL THEN
        BEGIN
            SELECT FECHA_NAC, ID_REPRESENTANTE INTO v_fan_fecha, v_rep_id
            FROM FANS_MENOR_LEGO
            WHERE ID_FAN = :NEW.PARTICIPANTE_MENOR;
        EXCEPTION
            WHEN NO_DATA_FOUND THEN
                RAISE_APPLICATION_ERROR(-20024, 'Fan referenciado no exite');
        END;

        -- If fan is under 18 (born after cutoff), require representative presence in same INSCRIPCION
        IF v_fan_fecha > ADD_MONTHS(SYSDATE, -12*18) THEN
            IF v_rep_id IS NULL THEN
                RAISE_APPLICATION_ERROR(-20025, 'Fan menor a 18 debe tener un representante legal asignado');
            END IF;

            SELECT COUNT(*) INTO v_rep_exists
            FROM INSCRITOS
            WHERE NUM_INSCRIPCION = :NEW.NUM_INSCRIPCION
              AND F_INICIO = :NEW.F_INICIO
              AND PARTICIPANTE_MAYOR = v_rep_id;

            IF v_rep_exists = 0 THEN
                RAISE_APPLICATION_ERROR(-20026, 'Se debe inscribir al representante legal del menor para permitir inscripcion');
            END IF;
        END IF;
    END IF;
END;
/

COMMIT;


-- INSERTS FOR TEST DATA
-- PAISES
-- 1. Sudáfrica
INSERT INTO PAISES(ID_PAIS, NOMBRE, NACIONALIDAD, CONTINENTE, UNION_EUROPEA)
VALUES (1, 'Sudafrica', 'Sudafricana', 'AFRICA', 0);

-- 2. Filipinas
INSERT INTO PAISES(ID_PAIS, NOMBRE, NACIONALIDAD, CONTINENTE, UNION_EUROPEA) 
VALUES (2, 'Filipinas', 'Filipina', 'ASIA', 0);

-- 3. Irlanda (Es miembro de la UE)
INSERT INTO PAISES(ID_PAIS, NOMBRE, NACIONALIDAD, CONTINENTE, UNION_EUROPEA) 
VALUES (3, 'Irlanda', 'Irlandesa', 'EUROPA', 1);

-- 4. Chile
INSERT INTO PAISES(ID_PAIS, NOMBRE, NACIONALIDAD, CONTINENTE, UNION_EUROPEA) 
VALUES (4, 'Chile', 'Chilena', 'AMERICA', 0);

-- 5. Indonesia
INSERT INTO PAISES(ID_PAIS, NOMBRE, NACIONALIDAD, CONTINENTE, UNION_EUROPEA) 
VALUES (5, 'Indonesia', 'Indonesa', 'ASIA', 0);

-- 6. Corea del Sur
INSERT INTO PAISES(ID_PAIS, NOMBRE, NACIONALIDAD, CONTINENTE, UNION_EUROPEA) 
VALUES (6, 'Corea del Sur', 'Surcoreana', 'ASIA', 0);

COMMIT;

-- INSIDE_TOURS
-- TOUR 1: Año 2024 (Precio base 250.00 €)
INSERT INTO INSIDE_TOURS (F_INICIO, PRECIO_PERSONA, TOTAL_CUPOS)
VALUES (DATE '2024-01-10', 250.00, 20);

-- TOUR 2: Año 2024.
-- Fecha válida: El anterior terminó el 12 (10, 11, 12). Este empieza el 15.
-- Precio: Debe ser IGUAL al anterior por ser del mismo año.
INSERT INTO INSIDE_TOURS (F_INICIO, PRECIO_PERSONA, TOTAL_CUPOS)
VALUES (DATE '2024-01-15', 250.00, 25);

-- TOUR 3: Año 2025 (Nuevo año, el precio sube a 300.50 €)
INSERT INTO INSIDE_TOURS (F_INICIO, PRECIO_PERSONA, TOTAL_CUPOS)
VALUES (DATE '2025-05-01', 300.50, 30);

-- TOUR 4: Año 2025.
-- Fecha válida: El anterior ocupó 1, 2 y 3 de mayo. Este empieza el 5 de mayo.
-- Precio: Debe ser 300.50 (igual que el otro del 2025).
INSERT INTO INSIDE_TOURS (F_INICIO, PRECIO_PERSONA, TOTAL_CUPOS)
VALUES (DATE '2025-05-05', 300.50, 30);

-- TOUR 5: Año 2025.
-- Fecha límite: Empieza justo después del anterior (5, 6, 7 ocupados -> empieza el 8).
INSERT INTO INSIDE_TOURS (F_INICIO, PRECIO_PERSONA, TOTAL_CUPOS)
VALUES (DATE '2025-05-08', 300.50, 15);

-- TOUR 6: Año 2026 (Nuevo precio anual: 350.00 €)
-- Duración: 10, 11 y 12 de Marzo.
INSERT INTO INSIDE_TOURS (F_INICIO, PRECIO_PERSONA, TOTAL_CUPOS)
VALUES (DATE '2026-03-10', 350.00, 20);

-- TOUR 7: Año 2026
-- Fecha: 20 de Marzo (No se solapa con el anterior que terminó el 12).
-- Precio: Debe mantenerse en 350.00 por ser del mismo año 2026.
INSERT INTO INSIDE_TOURS (F_INICIO, PRECIO_PERSONA, TOTAL_CUPOS)
VALUES (DATE '2026-03-20', 350.00, 15);

COMMIT;

-- CLIENTES_LEGO
-- Cliente 1: Chileno viviendo en Chile
INSERT INTO CLIENTES_LEGO (ID_CLIENTE, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, TELEFONO, NACIMIENTO, RESIDENCIA, S_NOMBRE, NUM_PASS, F_VEN_PASS, EMAIL)
VALUES (1, 'JUAN', 'SOTO', 'MUNOZ', DATE '1990-05-15', 'DOC-CH-001', 987654321, 4, 4, 'CARLOS', 'PASS-001', DATE '2030-05-15', 'juan.soto@email.com');

-- Cliente 2: Irlandesa viviendo en Irlanda
INSERT INTO CLIENTES_LEGO (ID_CLIENTE, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, TELEFONO, NACIMIENTO, RESIDENCIA, S_NOMBRE, NUM_PASS, F_VEN_PASS, EMAIL)
VALUES (2, 'SIOBHAN', 'O-CONNOR', 'SMITH', DATE '1988-11-20', 'DOC-IR-022', 445566778, 3, 3, NULL, 'PASS-002', DATE '2029-11-20', 'siobhan.oc@email.com');

-- Cliente 3: Indonesio viviendo en Corea del Sur
INSERT INTO CLIENTES_LEGO (ID_CLIENTE, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, TELEFONO, NACIMIENTO, RESIDENCIA, S_NOMBRE, NUM_PASS, F_VEN_PASS, EMAIL)
VALUES (3, 'BUDI', 'SANTOSO', 'PUTRA', DATE '1995-02-10', 'DOC-IN-033', 112233445, 5, 6, 'DARMA', 'PASS-003', DATE '2028-02-10', 'budi.santoso@email.com');

-- Cliente 4: Sudafricano viviendo en Filipinas
INSERT INTO CLIENTES_LEGO (ID_CLIENTE, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, TELEFONO, NACIMIENTO, RESIDENCIA, S_NOMBRE, NUM_PASS, F_VEN_PASS, EMAIL)
VALUES (4, 'THABO', 'MOLEFE', 'ZULU', DATE '1982-07-30', 'DOC-SA-044', 998877665, 1, 2, NULL, 'PASS-004', DATE '2027-07-30', 'thabo.mz@email.com');

-- Cliente 5: Filipina viviendo en Irlanda
INSERT INTO CLIENTES_LEGO (ID_CLIENTE, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, TELEFONO, NACIMIENTO, RESIDENCIA, S_NOMBRE, NUM_PASS, F_VEN_PASS, EMAIL)
VALUES (5, 'MARIA', 'SANTOS', 'REYES', DATE '2000-12-05', 'DOC-PH-055', 667788990, 2, 3, 'ISABEL', 'PASS-005', DATE '2032-12-05', 'maria.reyes@email.com');

COMMIT;

--FANS_MENOR_LEGO
-- Fan 1: Un niño de 10 años (Chile, ID 4). Representado por Cliente 1.
INSERT INTO FANS_MENOR_LEGO (ID_FAN, NACIMIENTO, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, S_NOMBRE, ID_REPRESENTANTE, NUM_PASS, F_VEN_PASS)
VALUES (1, 4, 'TOMAS', 'SOTO', 'DIAZ', DATE '2015-06-01', 'DOC-FAN-CH-1', NULL, 1, 'PASS-FAN-01', DATE '2028-03-15');

-- Fan 2: Una joven de 19 años (Irlanda, ID 3). Es mayor de 18 pero menor de 21.
INSERT INTO FANS_MENOR_LEGO (ID_FAN, NACIMIENTO, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, S_NOMBRE, ID_REPRESENTANTE, NUM_PASS, F_VEN_PASS)
VALUES (2, 3, 'CIARA', 'O-CONNOR', 'WALSH', DATE '2006-03-15', 'DOC-FAN-IR-2', NULL, 2, 'PASS-FAN-02', DATE '2028-03-15');

-- Fan 3: Un niño de 7 años (Indonesia, ID 5). Representado por Cliente 3.
INSERT INTO FANS_MENOR_LEGO (ID_FAN, NACIMIENTO, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, S_NOMBRE, ID_REPRESENTANTE, NUM_PASS, F_VEN_PASS)
VALUES (3, 5, 'SARI', 'SANTOS', 'KUSUMA', DATE '2018-09-09', 'DOC-FAN-IN-3', NULL, 3, 'PASS-FAN-03', DATE '2028-03-15');

-- Fan 4: Un adolescente de 16 años (Sudáfrica, ID 1). Representado por Cliente 4.
INSERT INTO FANS_MENOR_LEGO (ID_FAN, NACIMIENTO, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, S_NOMBRE, ID_REPRESENTANTE, NUM_PASS, F_VEN_PASS)
VALUES (4, 1, 'LEO', 'MOLEFE', 'KHUMALO', DATE '2009-11-20', 'DOC-FAN-SA-4', NULL, 4, 'PASS-FAN-04', DATE '2029-11-20');

-- Fan 5: Joven surcoreano de 20 años (Nacido en 2005).
INSERT INTO FANS_MENOR_LEGO (ID_FAN, NACIMIENTO, P_NOMBRE, P_APELLIDO, S_APELLIDO, FECHA_NAC, NUM_DOC, S_NOMBRE, ID_REPRESENTANTE, NUM_PASS, F_VEN_PASS)
VALUES (5, 6, 'MIN-JI', 'KIM', 'LEE', DATE '2005-06-15', 'DOC-FAN-KR-5', NULL, NULL, 'PASS-FAN-05', DATE '2035-06-15');

COMMIT;